<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RestFB - A Lightweight Java Facebook Graph API and Old REST API Client</title>

	<!-- opengraph information> -->
	<meta property="og:title" content="restfb">
	<meta property="og:site_name" content="restfb">
	<meta property="og:url" content="http://www.restfb.com/index.html">
	<meta property="og:description" content="RestFB is a simple and flexible Facebook Graph API and Old REST API client written in Java.">
	<meta property="og:type" content="website">

	<!-- Bootstrap -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/restfb.min.css" rel="stylesheet">

	<link rel="stylesheet" href="assets/highlight/styles/github.css">
	<script src="assets/highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
			<![endif]-->
    </head>
    <body>
	<header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
	    <nav class="navbar navbar-default navbar-fixed-top" id="fixed-nav-header">
		<div class="container">
		    <div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
			    <span class="sr-only">Toggle navigation</span>
			    <span class="icon-bar"></span>
			    <span class="icon-bar"></span>
			    <span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#"><span class="restfb-brand-dark">rest</span><span class="restfb-brand-highlight">fb</span></a>
		    </div>
		    <div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
			    <li><a href="#"><span class="glyphicon glyphicon-home glyph-padding"></span>Home</a></li>
			    <li><a href="#download"><span class="glyphicon glyphicon-download glyph-padding"></span>Download</a></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
			    <li><a href="javadoc/index.html" target="_blank"><span class="glyphicon glyphicon-book glyph-padding"></span>Javadoc</a></li>
			    <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-comment glyph-padding"></span>Contact <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
				    <li><a href="https://github.com/revetkn/restfb/issues" target="_blank">Issue Tracker</a></li>
				    <li><a href="http://groups.google.com/group/restfb" target="_blank">Google Group</a></li>
				    <li><a href="https://github.com/revetkn/restfb" target="_blank">Github</a></li>
				</ul>
			    </li>
			</ul>
		    </div><!--/.nav-collapse -->
		</div>
	    </nav>
	    <div class="bs-docs-header" id="content">
		<div class="container">
		    <div class="container">
			<h1 class="restfb-logo-brand"><span class="restfb-brand-light">rest</span><span class="restfb-brand-highlight">fb</span></h1>
			<p>
			    RestFB is a simple and flexible
			    <a target="_blank" href="http://developers.facebook.com/docs/api">Facebook Graph API</a> and 
			    <a target="_blank" href="http://developers.facebook.com/docs/reference/rest/">Old REST API</a> client written in Java.
			    <br/>
			    It is open source software released under the terms of the <a href="#licensing">MIT License</a>.
			</p>

		    </div>
		</div>
	    </div>
	</header>

	<div class="container bs-docs-container">

	    <div class="row">
		<div class="col-md-9" role="main">
		    <div class="bs-docs-section">
			<h1 id="download" class="page-header">Download</h1>
			<p>
			    <span id="restfb-version">Newest Version</span> <span id="restfb-release-date"></span> of the library is available via RestFB's home on <a target="_blank" href="https://github.com/revetkn/restfb">Github</a>.
			    <br/>
			    <a target="_blank" href="https://github.com/revetkn/restfb/blob/master/CHANGELOG">View the changelog</a>, 
			    or <a target="_blank" href="/downloads/restfb-1.8.0.zip">download it here</a>.
			</p>

			<p>
			    The project zip contains sample code in the <code>source/example</code> directory which can help you get up and running quickly.
			</p>				

			<p>
			    RestFB is a single JAR - just drop it into your app and you're ready to go. Download it from Maven Central:
			</p>
			<p>
			    <a href="http://mvnrepository.com/artifact/com.restfb/restfb" target="_blank"><img src="https://img.shields.io/maven-central/v/com.restfb/restfb.svg?style=flat" alt="maven central restfb version"></a>
			</p>

			<h2>Motivations</h2>

			<p>
			    Design goals:
			</p>
			<ul>
			    <li>Minimal public API</li>
			    <li>Maximal extensibility</li>
			    <li>Robustness in the face of frequent Facebook API changes</li>
			    <li>Simple metadata-driven configuration</li>
			    <li><b>Zero</b> dependencies</li>			
			</ul> 

			<p>
			    Non-goals:	
			</p>
			<ul>
			    <li>Support for non-Graph/non-REST API parts of the Facebook Platform</li>
			    <li>Providing a mechanism for obtaining session keys or OAuth access tokens</li>
			    <li>Using XML as a data transfer format in addition to JSON</li>
			    <li>Formally-typed versions of all Facebook API methods, error codes, etc.</li>
			</ul>

			<p>
			    If RestFB doesn't meet your needs, check out sister project <a target="_blank" href="http://batchfb.googlecode.com/">BatchFB</a>.  It's a good lower-level client, especially if you're concerned with batching and performance.
			</p>

			<h2>How To Use It</h2>

			<p>
			    You can <a href="#running-examples">run some sample code</a>,
			    jump straight to the <a target="_blank" href="javadoc/index.html">RestFB Javadoc</a>, or learn by example below.
			</p>

			<p>
			    If you're looking for help or additional examples, please check out the <a target="_blank" href="http://groups.google.com/group/restfb">RestFB Google Group</a>
			    or visit the <code>source/examples</code> directory in the RestFB distribution.
			</p>

			<div class="bs-callout bs-callout-warning" role="alert">
			    <h4>The below documentation is for the Facebook Graph API component of RestFB.</h4>
			    <!-- <div>
				If you'd like to code against the Old REST Facebook API, though, RestFB has you covered.
				<a href="legacy-rest-api.html">Just use LegacyFacebookClient, which is documented here</a>.  It even supports the new OAuth authentication scheme!
			    </div> -->	
			</div>
		    </div>
		    <div class="bs-docs-section">
			<h1 id="initialization" class="page-header">Initialization</h1>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// <a target="_blank" href="javadoc/com/restfb/DefaultFacebookClient.html">DefaultFacebookClient</a> is the <a target="_blank" href="javadoc/com/restfb/FacebookClient.html">FacebookClient</a> implementation
// that ships with RestFB. You can customize it by passing in
// custom <a target="_blank" href="javadoc/com/restfb/JsonMapper.html">JsonMapper</a> and <a target="_blank" href="javadoc/com/restfb/WebRequestor.html">WebRequestor</a> implementations, or simply
// write your own FacebookClient instead for maximum control.

FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN);

// It's also possible to create a client that can only access
// publicly-visible data - no access token required. 
// Note that many of the examples below <b>will not work</b> unless you supply an access token! 

FacebookClient publicOnlyFacebookClient = new DefaultFacebookClient();

// Get added security by using your app secret:

FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN, MY_APP_SECRET);</code></pre></div>	

			<div class="bs-callout bs-callout-warning" role="alert">
			    <h4>Not sure how to get an OAuth access token?</h4>
			    <div>
				It's really easy with the Facebook Graph API.  Sign in to Facebook and <a target="_blank" href="https://developers.facebook.com/tools/explorer">navigate to the Graph API Explorer app</a>.
				Click the "Get Access Token" button.  That's it!</div>	
			</div>
		    </div>
		    <div class="bs-docs-section">
			<h1 id="fetching" class="page-header">Fetching</h1>
			<h2 id="fetching-single-objects">Fetching Single Objects</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// For all API calls, you need to tell RestFB how to turn the JSON
// returned by Facebook into Java objects.  In this case, the data
// we get back should be mapped to the <a target="_blank" href="/javadoc/com/restfb/types/User.html">User</a> and <a target="_blank" href="/javadoc/com/restfb/types/Page.html">Page</a> types, respectively.
// You can write your own types too!

User user = facebookClient.fetchObject("me", User.class);
Page page = facebookClient.fetchObject("cocacola", Page.class);

out.println("User name: " + user.getName());
out.println("Page likes: " + page.getLikes());</code></pre></div>

			<h2 id="fetching-multiple-objects">Fetching Multiple Objects</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#reading">Graph API documentation</a>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
FetchObjectsResults fetchObjectsResults =
  facebookClient.fetchObjects(Arrays.asList("me", "cocacola"), FetchObjectsResults.class);

out.println("User name: " + fetchObjectsResults.me.getName());
out.println("Page likes: " + fetchObjectsResults.page.getLikes());

...

// Holds results from a "fetchObjects" call.
// You need to write this class yourself!

public class FetchObjectsResults {
  @Facebook
  User me;

  // If the Facebook property name doesn't match
  // the Java field name, specify the Facebook field name in the annotation.

  @Facebook("cocacola")
  Page page;
}</code></pre></div>

			<h2 id="fetching-connections">Fetching Objects</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
Connection&lt;User&gt; myFriends = facebookClient.fetchConnection("me/friends", User.class);
Connection&lt;Post&gt; myFeed = facebookClient.fetchConnection("me/feed", Post.class);

out.println("Count of my friends: " + myFriends.getData().size());
out.println("First item in my feed: " + myFeed.getData().get(0));

// Connections support paging and are iterable

for (List&lt;Post&gt; myFeedConnectionPage : myFeed)
  for (Post post : myFeedConnectionPage)
    out.println("Post: " + post);</code></pre></div>
			<h2 id="fetching-insights">Fetching Insights</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Fetching Insights data is as simple as fetching a Connection

Connection&lt;Insight&gt; insights = facebookClient.fetchConnection("PAGE_ID/insights", Insight.class);

for (Insight insight : insights.getData())
  out.println(insight.getName());</code></pre></div>	
		    </div>
		    <div class="bs-docs-section">
			<h1 id="logging" class="page-header">Logging</h1>
			<h2 id="logging-explanation">A few words...</h2>
			<div class="bs-callout bs-callout-warning" role="alert">
			    <h4>Before we go further, a few words about logging...</h4>

			    <div>
				RestFB uses java.util.logging to log the data that's sent over the wire to and from Facebook.
				It's often helpful to look at the log output so you can make sure that RestFB is sending the data as you expect it to
				and that Facebook is returning the correct JSON.
			    </div>	

			    <div class="spacer"></div>

			    <div>
				Want to use <a target="_blank" href="http://logging.apache.org/log4j/1.2/">Log4j</a> instead of java.util.logging?  
				No problem!  You can disable java.util.logging for RestFB and use <a target="_blank" href="http://www.slf4j.org/">SLF4J</a> to re-route (bridge) all logging calls to
				Log4j. You may <a href="examples/RestFB%20Log4j%20Example.zip">download an example project which demonstrates this process</a>.

				<div class="spacer"></div>

				If you're curious about how this works, <a target="_blank" href="http://slf4j.org/legacy.html">here's more information about SLF4J bridging.</a>

				<div class="spacer"></div>

				If you're concerned about SLF4J bridging performance, check out <a href="http://logback.qos.ch/manual/configuration.html#LevelChangePropagator" target="_blank">this section of the SLF4J manual</a>.
				<br/>
				Thanks to Chris Pruett for the heads-up about that.	
			    </div>			
			</div>	
			<h2 id="logging-example">Logging Example</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// You'll want to initialize the bridge just once at app startup.
// In a webapp, a good place to do this is ContextLoaderListener#contextInitialized()
SLF4JBridgeHandler.install();

try {
  FacebookClient facebookClient = new DefaultFacebookClient();

  // You'll notice that logging statements from this call are bridged from java.util.logging to Log4j
  User user = facebookClient.fetchObject("btaylor", User.class);

  // ...and of course this goes straight to Log4j
  logger.debug(user);
} finally {
  // Make sure to tear down when you're done using the bridge
  SLF4JBridgeHandler.uninstall();
}</code></pre></div>

			<h2 id="logging-configuration">Configuration</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
# Example logging.properties entries
# ==================================

# to log the call to facebook including their responses
# you can change the com.restfb.HTTP log level accordingly during development time
com.restfb.HTTP.level=ALL 

# the complete restfb package logging can be configured like this
com.restfb.level=WARNING</code></pre></div>

		    </div>
		    <div class="bs-docs-section">
			<h1 id="searching" class="page-header">Searching</h1>
			see <a target="_blank" href="http://developers.facebook.com/docs/api">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Searching is just a special case of fetching Connections -
// all you have to do is pass along a few extra parameters.

Connection&lt;Post&gt; publicSearch =
  facebookClient.fetchConnection("search", Post.class,
    Parameter.with("q", "watermelon"), Parameter.with("type", "post"));

Connection&lt;User&gt; targetedSearch =
  facebookClient.fetchConnection("me/home", User.class,
    Parameter.with("q", "Mark"), Parameter.with("type", "user"));

out.println("Public search: " + publicSearch.getData().get(0).getMessage());
out.println("Posts on my wall by friends named Mark: " + targetedSearch.getData().size());</code></pre></div>

		    </div>
		    <div class="bs-docs-section">
			<h1 id="executing-fql" class="page-header">Using FQL</h1>
			<h2 id="executing-fql-queries">Executing FQL Queries</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/reference/fql/">FQL documentation</a>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
String query = "SELECT uid, name FROM user WHERE uid=220439 or uid=7901103";
List&lt;FqlUser&gt; users = facebookClient.executeFqlQuery(query, FqlUser.class);

out.println("Users: " + users);

...

// Holds results from an "executeFqlQuery" call.
// You need to write this class yourself!
// Be aware that FQL fields don't always map to Graph API Object fields.

public class FqlUser {
  @Facebook
  String uid;
  
  @Facebook
  String name;

  @Override
  public String toString() {
    return String.format("%s (%s)", name, uid);
  }
}</code></pre></div>
			<h2 id="executing-multiple-fql-queries">Executing Multiple FQL Queries in One Call</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/reference/fql/">FQL documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
Map&lt;String, String&gt; queries = new HashMap&lt;String, String&gt;() {
  {
    put("users", "SELECT uid, name FROM user WHERE uid=220439 OR uid=7901103");
    put("likers", "SELECT user_id FROM like WHERE object_id=122788341354")
  }
};

MultiqueryResults multiqueryResults =
  facebookClient.executeFqlMultiquery(queries, MultiqueryResults.class);

out.println("Users: " + multiqueryResults.users);
out.println("People who liked: " + multiqueryResults.likers);

...

// Holds results from an "executeFqlMultiquery" call.
// You need to write these classes yourself (along with the FqlUser class above)!

public class FqlLiker {
  @Facebook("user_id")
  String userId;
  
  @Override
  public String toString() {
    return userId;
  }  
}

public class MultiqueryResults {
  @Facebook
  List&lt;FqlUser&gt; users;

  @Facebook
  List&lt;FqlLiker&gt; likers;
}</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="advanced-usage" class="page-header">Advanced usage</h1>
			<h2 id="metadata-introspection">Metadata &amp; Introspection</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#reading">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// You can specify metadata=1 for many calls, not just this one.
// See the Facebook Graph API documentation for more details. 

User userWithMetadata =
  facebookClient.fetchObject("me", User.class, Parameter.with("metadata", 1));

out.println("User metadata: has albums? "
  + userWithMetadata.getMetadata().getConnections().hasAlbums());</code></pre></div>	
			<h2 id="passing-parameters">Passing Parameters</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#reading">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// You can pass along any parameters you'd like to the Facebook endpoint.

Date oneWeekAgo = new Date(currentTimeMillis() - 1000L * 60L * 60L * 24L * 7L);

Connection&lt;Post&gt; filteredFeed = facebookClient.fetchConnection("me/feed", Post.class,
  Parameter.with("limit", 3), Parameter.with("until", "yesterday"),
    Parameter.with("since", oneWeekAgo));

out.println("Filtered feed count: " + filteredFeed.getData().size());</code></pre></div>
			<h2 id="selecting-specific-fields">Selecting Specific Fields</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#reading">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
User user = facebookClient.fetchObject("me", User.class,
  Parameter.with("fields", "id, name"));

out.println("User name: " + user.getName());</code></pre></div>
			<h2 id="fetch-post-total-count">Fetch Post with comments/likes total count</h2>
			see <a target="_blank" href="https://developers.facebook.com/docs/apps/migrations/completed-changes#july_2013">July 2013 Breaking Changes</a>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Some Post from the GoT Fanpage with likes and comments total count
Post post = client.fetchObject("74133697733_10152424266332734", 
  Post.class, 
  Parameter.with("fields", "from,to,likes.summary(true),comments.summary(true)"));

out.println("Likes count: " + post.getLikesCount());
out.println("Likes count (from Likes): " + post.getLikes().getCount());
out.println("Comments count: " + post.getComments().getTotalCount());</code></pre></div>

		    </div>

		    <div class="bs-docs-section">
			<h1 id="creating-json-objects" class="page-header">Creating JSON Objects</h1>
			<h3>Getting Any Kind of Data as a JSON Object</h3>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Sometimes you can't know field names at compile time
// so the @Facebook annotation can't be used.
// Or maybe you'd like full control over the data that gets returned.
// Either way, RestFB has you covered.  Just map any API call to <a target="_blank" href="/javadoc/com/restfb/json/JsonObject.html">JsonObject</a>.

// Here's how to fetch a single object

JsonObject btaylor = facebookClient.fetchObject("btaylor", JsonObject.class);
out.println(btaylor.getString("name"));

// Here's how to fetch a connection

JsonObject photosConnection = facebookClient.fetchObject("me/photos", JsonObject.class);
String firstPhotoUrl = photosConnection.getJsonArray("data").getJsonObject(0).getString("source");
out.println(firstPhotoUrl);

// Here's how to handle an FQL query

String query = "SELECT uid, name FROM user WHERE uid=220439 or uid=7901103";
List&lt;JsonObject&gt; queryResults = facebookClient.executeFqlQuery(query, JsonObject.class);
out.println(queryResults.get(0).getString("name"));

// Sometimes it's helpful to use JsonMapper directly if you're working with JsonObjects.

List&lt;String&gt; ids = new ArrayList&lt;String&gt;();
ids.add("btaylor");
ids.add("http://www.imdb.com/title/tt0117500/");

// First, make the API call...

JsonObject results = facebookClient.fetchObjects(ids, JsonObject.class);

// ...then pull out raw JSON data and map each type "by hand".
// Normally your FacebookClient uses a JsonMapper internally, but
// there's nothing stopping you from using it too!

JsonMapper jsonMapper = new DefaultJsonMapper();
User user = jsonMapper.toJavaObject(results.getString("btaylor"), User.class);
Url url = jsonMapper.toJavaObject(results.getString("http://restfb.com"), Url.class);

out.println("User is " + user);
out.println("URL is " + url);</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="publishing" class="page-header">Publishing</h1>
			<div class="bs-callout bs-callout-warning" role="alert">
			    <h4>A note about the Publish and Delete examples below</h4>

			    <div>
				In order to use these, you'll need to create a Facebook Application and then request an OAuth
				access token with the proper permissions,	e.g. <code>publish_stream,create_event</code>.
			    </div>	

			    <div class="spacer"></div>	

			    <div>	
				The <a target="_blank" href="http://developers.facebook.com/docs/api#auth">Facebook Graph API authorization documentation</a>
				explains how to do this in detail.
				<br/>
				If you're in a hurry, though, here's a quick example:
			    </div>

			    <div class="spacer"></div>

			    <div>
				<ul style="list-style-type: decimal;">
				    <li>Create a Facebook Application</li>
				    <li>Request <code>https://graph.facebook.com/oauth/authorize?client_id=MY_API_KEY&amp;
					    redirect_uri=http://www.facebook.com/connect/login_success.html&amp;
					    scope=publish_stream,create_event</code></li>
				    <li>Facebook will redirect you to <code>http://www.facebook.com/connect/login_success.html?
					    code=MY_VERIFICATION_CODE</code></li>
				    <li>Request <code>https://graph.facebook.com/oauth/access_token?client_id=MY_API_KEY&amp;
					    redirect_uri=http://www.facebook.com/connect/login_success.html&amp;
					    client_secret=MY_APP_SECRET&amp;code=MY_VERIFICATION_CODE</code></li>
				    <li>Facebook will respond with <code>access_token=MY_ACCESS_TOKEN</code></li>
				</ul>
			    </div>
			</div>
			<h2 id="publishing-message-event">Publishing a Message and Event</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#editing">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// Publishing a simple message.
// FacebookType represents any Facebook Graph Object that has an ID property.

FacebookType publishMessageResponse =
  facebookClient.publish("me/feed", FacebookType.class,
    Parameter.with("message", "RestFB test"));

out.println("Published message ID: " + publishMessageResponse.getId());

// Publishing an event

Date tomorrow = new Date(currentTimeMillis() + 1000L * 60L * 60L * 24L);
Date twoDaysFromNow = new Date(currentTimeMillis() + 1000L * 60L * 60L * 48L);

FacebookType publishEventResponse = facebookClient.publish("me/events", FacebookType.class,
  Parameter.with("name", "Party"), Parameter.with("start_time", tomorrow),
    Parameter.with("end_time", twoDaysFromNow));

out.println("Published event ID: " + publishEventResponse.getId());</code></pre></div>
			<h2 id="publishing-photo">Publishing a Photo</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/reference/api/photo/">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// Publishing an image to a photo album is easy!
// Just specify the image you'd like to upload and RestFB will handle it from there.

FacebookType publishPhotoResponse = facebookClient.publish("me/photos", FacebookType.class,
  BinaryAttachment.with("cat.png", getClass().getResourceAsStream("/cat.png")),
  Parameter.with("message", "Test cat"));

out.println("Published photo ID: " + publishPhotoResponse.getId());

// Publishing a video works the same way.

facebookClient.publish("me/videos", FacebookType.class,
  BinaryAttachment.with("cat.mov", getClass().getResourceAsStream("/cat.mov")),
  Parameter.with("message", "Test cat"));</code></pre></div>	
			<h2 id="publishing-checkin">Publishing a Checkin</h2>
			see <a target="_blank" href="http://developers.facebook.com/docs/reference/api/checkin">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">Map&lt;String, String&gt; coordinates = new HashMap&lt;String, String&gt;();
coordinates.put("latitude", "37.06");
coordinates.put("longitude", "-95.67");
			
FacebookType publishCheckinResponse = facebookClient.publish("me/checkins",
  FacebookType.class, Parameter.with("message", "I'm here!"),
    Parameter.with("coordinates", coordinates), Parameter.with("place", 1234)));

out.println("Published checkin ID: " + publishCheckinResponse.getId());</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="deleting" class="page-header">Deleting</h1>
			see <a target="_blank" href="http://developers.facebook.com/docs/api#deleting">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">Boolean deleted = facebookClient.deleteObject("some object ID");
out.println("Deleted object? " + deleted);</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="batch-api" class="page-header">Batch API</h1>
			<h2 id="batch-api-request">Using Batch Request API</h2>
			see <a target="_blank" href="https://developers.facebook.com/docs/reference/api/batch/">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// The Batch API is great if you have multiple operations you'd like to
// perform in one server trip. Let's build a batch with three GET requests and
// one POST request here:

BatchRequest meRequest = new BatchRequestBuilder("me").build();
BatchRequest badRequest = new BatchRequestBuilder("this-is-a-bad-request/xxx").build();
BatchRequest m83musicRequest = new BatchRequestBuilder("m83music/feed")
  .parameters(Parameter.with("limit", 5)).build();
BatchRequest postRequest = new BatchRequestBuilder("me/feed")
  .method("POST")
  .body(Parameter.with("message", "Testing!")).build();

// ...and execute the batch.

List&lt;BatchResponse&gt; batchResponses =
  facebookClient.executeBatch(meRequest, badRequest, m83musicRequest, postRequest);

// Responses are ordered to match up with their corresponding requests.

BatchResponse meResponse = batchResponses.get(0);
BatchResponse badResponse = batchResponses.get(1);
BatchResponse m83musicResponse = batchResponses.get(2);
BatchResponse postResponse = batchResponses.get(3);

// Since batches can have heterogenous response types, it's up to you
// to parse the JSON into Java objects yourself. Luckily RestFB has some built-in
// support to help you with this.

JsonMapper jsonMapper = new DefaultJsonMapper();

// Here we marshal to the built-in User type.

User me = jsonMapper.toJavaObject(meResponse.getBody(), User.class);
out.println(me);

// To detect errors, check the HTTP response code.

if(badResponse.getCode() != 200)
  out.println("Batch request failed: " + badResponse);

// You can pull out connection data...

out.println("M83's feed follows");

Connection&lt;Post&gt; m83musicPosts =
  new Connection&lt;Post&gt;(facebookClient, m83musicResponse.getBody(), Post.class);

for (List&lt;Post&gt; m83musicPostsConnectionPage : m83musicPosts)
  for (Post post : m83musicPostsConnectionPage)
    out.println(post);

// ...or do whatever you'd like with the raw JSON.

out.println(postResponse.getBody());</code></pre></div>
			<h2 id="batch-api-photo">Including Binary Attachments Using the Batch Request API</h2>
			see <a target="_blank" href="https://developers.facebook.com/docs/reference/api/batch/">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">// Per the FB Batch API documentation, attached_files is a comma-separated list
// of attachment names to include in the API call.
// RestFB will use the filename provided to your BinaryAttachment minus the file
// extension as the name of the attachment.
// For example, "cat-pic.png" must be referenced here as "cat-pic". 

List&lt;BatchRequest&gt; batchRequests = Arrays.asList(
  new BatchRequestBuilder("me/photos").attachedFiles("cat-pic").build(),
  new BatchRequestBuilder("me/videos")
    .attachedFiles("cat-vid, cat-vid-2")
    .body(Parameter.with("message", "This cat is hilarious"))
    .build());

// Define the list of attachments to include in the batch.

List&lt;BinaryAttachment&gt; binaryAttachments = Arrays.asList(
  BinaryAttachment.with("cat-pic.png", getClass().getResourceAsStream("/cat-pic.png")),
  BinaryAttachment.with("cat-vid.mov", getClass().getResourceAsStream("/cat-vid.mov")),
  BinaryAttachment.with("cat-vid-2.mov", getClass().getResourceAsStream("/cat-vid-2.mov")));

// Finally, execute the batch.

facebookClient.executeBatch(batchRequests, binaryAttachments);</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="access-token-operations" class="page-header">Access Token Operations</h1>
			<h2 id="access-token-extend">Extending an Access Token</h2>
			see <a target="_blank" href="https://developers.facebook.com/roadmap/offline-access-removal/#extend_token">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Tells Facebook to extend the lifetime of MY_ACCESS_TOKEN.
// Facebook may return the same token or a new one.

AccessToken accessToken =
  new DefaultFacebookClient().obtainExtendedAccessToken(MY_APP_ID,
    MY_APP_SECRET, MY_ACCESS_TOKEN);

out.println("My extended access token: " + accessToken);</code></pre></div>
			<h2 id="access-token-application">Getting an Application Access Token</h2>
			see <a target="_blank" href="https://developers.facebook.com/docs/authentication/applications/">Graph API documentation</a>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Obtains an access token which can be used to perform Graph API operations
// on behalf of an application instead of a user.

AccessToken accessToken =
  new DefaultFacebookClient().obtainAppAccessToken(MY_APP_ID, MY_APP_SECRET);

out.println("My application access token: " + accessToken);</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="security-operations" class="page-header">Security Operations</h1>
			<h2 id="security-signed-requests">Parsing Signed Requests</h2>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Facebook can send you an encoded signed request, which is only decodable by you
// with your App Secret. Pass the signed request, your app secret, and a class that
// specifies how RestFB should map the decoded signed request JSON.

String signedRequest = "xxx";
String appSecret = "yyy";
Payload payload = facebookClient.parseSignedRequest(signedRequest,
  appSecret, Payload.class);

out.println("Signed request user_id: " + payload.userId);

// You must write your own class to hold signed request payload data
// since RestFB can't know in advance what fields FB will be sending you.
// Some are always present, like user_id, but the rest will be specific
// to your app and situation.

class Payload {
  @Facebook("user_id")
  String userId;

  @Facebook("oauth_token")
  String oauthToken;

  @Facebook
  Long expires;

  @Facebook("issued_at")
  Long issuedAt;

  Date getExpires() {
    return expires == null ? null : new Date(expires * 1000L);
  }

  Date getIssuedAt() {
    return issuedAt == null ? null : new Date(issuedAt * 1000L);
  }
  
  // Add whatever other fields you might have
}</code></pre></div>

			<h2 id="security-deauth-callback">Parsing Deauthorization Callback request</h2>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
// Facebook can send you an encoded signed request, as soon as someone deletes
// your Facebook app. This only happens, if you have defined a deauthorization
// callback url in your Facebook App (Settings -> Advanced).

String signedRequest = "xxx";
String appSecret = "yyy";
DeAuth deauthObj = facebookClient.parseSignedRequest(signedRequest,
  appSecret, DeAuth.class);

out.println("This user just deleted your app: " + deauthObj.getUserId());
out.println("Deauthorization at: " + deauthObj.getIssuedAt());</code></pre></div>

			<h2 id="security-appsecret">Generating appsecret_proof</h2>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
// If you create a DefaultFacebookClient instance with your app secret, RestFB will
// automatically include appsecret_proof with your requests,
// no work needs to be done on your end.

FacebookClient facebookClient =
  new DefaultFacebookClient(MY_ACCESS_TOKEN, MY_APP_SECRET);

// Request will include appsecret_proof

facebookClient.fetchObject("XXX", User.class);

// You may also generate the appsecret_proof value directly (not normally needed).

String proof = new DefaultFacebookClient().obtainAppSecretProof(
  MY_ACCESS_TOKEN, MY_APP_SECRET);
out.println("Here's my proof: " + proof);</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="running-examples" class="page-header">Running The Examples</h1>
			<p>
			    RestFB comes with a few example Java source files that you can run and tweak yourself.  Don't forget to put your access token inside the quotes!
			</p>

			<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ cd source/example
$ ant run-reader-examples "-Daccess_token=MY_ACCESS_TOKEN"
$ ant run-publisher-examples "-Daccess_token=MY_ACCESS_TOKEN"
$ ant run-legacy-examples "-Daccess_token=MY_ACCESS_TOKEN"</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="supported-graph-object-types" class="page-header">Supported Graph Object Types</h1>
			<p>
			    RestFB can map JSON to any class that has fields annotated with the <code>@Facebook</code> annotation, which is discussed in more detail in the
			    <a href="#json-mapping-rules">JSON Mapping Rules</a> section.
			</p>

			<p>
			    However, for your convenience, all basic <a target="_blank" href="http://developers.facebook.com/docs/reference/api/">Graph API Object</a> types have
			    their own Java implementation in the <code><a target="_blank" href="javadoc/com/restfb/types/package-summary.html">com.restfb.types</a></code> package.
			</p>

			<p>
			    You may use these builtin types if you wish, or you can subclass them to add additional fields or functionality, or just write your
			    own if you have special requirements.  The builtins come with reflective implementations of <code>toString()</code>, <code>hashCode()</code>,
			    and <code>equals(Object o)</code> to make your life simpler.  If you subclass any of the builtins and add additional fields with accessors,
			    those fields will be automatically taken into account by the above 3 methods.
			</p>

			<p>
			    The builtin types are as follows:
			</p>

			<div class="row">
			    <div class="col-sm-3">
				<ul class="list-group">
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Account.html">Account</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Album.html">Album</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Application.html">Application</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/AppRequest.html">AppRequest</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Category.html">Category</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Checkin.html">Checkin</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Comment.html">Comment</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Conversation.html">Conversation</a></li>
				</ul>
			    </div>
			    <div class="col-sm-3">
				<ul class="list-group">
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/DeAuth.html">DeAuth</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Event.html">Event</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/FriendList.html">FriendList</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Group.html">Group</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Insight.html">Insight</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Link.html">Link</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Message.html">Message</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Note.html">Note</a></li>
				</ul>
			    </div>
			    <div class="col-sm-3">
				<ul class="list-group">
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Page.html">Page</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/PageRating.html">PageRating</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Photo.html">Photo</a></li>			
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Place.html">Place</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Post.html">Post</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Question.html">Question</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/QuestionOption.html">QuestionOption</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Review.html">Review</a></li>
				</ul>
			    </div>
			    <div class="col-sm-3">
				<ul class="list-group">
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/StatusMessage.html">Status Message</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/TestUser.html">TestUser</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/User.html">User</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Venue.html">Venue</a></li>
				    <li class="list-group-item"><a target="_blank" href="/javadoc/com/restfb/types/Video.html">Video</a></li>
				</ul>
			    </div>
			</div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="json-mapping-rules" class="page-header">JSON Mapping Rules</h1>
			<p>
			    Using <code><a target="_blank" href="javadoc/com/restfb/DefaultJsonMapper.html">DefaultJsonMapper</a></code>,
			    RestFB is able to recursively map JSON fields annotated with <code>@Facebook</code> to the following Java types out of the box:
			</p>		

			<ul>
			    <li>The convenience classes provided by RestFB in <code>com.restfb.types</code></li>		
			    <li><code>String</code></li>
			    <li><code>Integer</code></li>
			    <li><code>Boolean</code></li>
			    <li><code>Long</code></li>
			    <li><code>Double</code></li>
			    <li><code>Float</code></li>
			    <li><code>BigInteger</code></li>
			    <li><code>BigDecimal</code></li>			
			    <li>
				Your own JavaBean-compliant classes
				<br/>
				<span class="footnote">
				    Don't forget to provide a public default constructor!
				</span>
			    </li>
			    <li>
				<code>List</code>s of any of the above types
			    </li>
			</ul>

			<p>
			    For example:	
			</p>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
public class MyClass {
  @Facebook
  String name;

  @Facebook
  BigDecimal value;
  
  // If a Facebook field doesn't match your field's name, specify it explicitly

  @Facebook("lots_of_numbers")
  List&lt;Integer&gt; lotsOfNumbers;
  
  // You can annotate methods with @JsonMappingCompleted to perform
  // post-mapping operations.
  //
  // This is useful if you want to massage the data FB returns.
  
  @JsonMappingCompleted
  void allDone(JsonMapper jsonMapper) {  	
    if(lotsOfNumbers.size() == 0)
      throw new IllegalStateException("I was expecting more numbers!");
  }
}</code></pre></div>			

			<p>
			    Java to JSON mapping is supported by default via <code><a target="_blank" href="javadoc/com/restfb/JsonMapper.html#toJson(java.lang.Object)">JsonMapper.toJson(Object object)</a></code>.
			    You may recursively convert primitive wrapper types as specified above, <code>List</code>s, <code>Map</code>s with <code>String</code> keys, and your own Javabean types
			    by applying the <code>@Facebook</code> annotation to any fields you'd like to include in the conversion.
			</p>

			<p>
			    The default behavior of <code>DefaultJsonMapper</code> is to throw a <code><a target="_blank" href="javadoc/com/restfb/exception/FacebookJsonMappingException.html">FacebookJsonMappingException</a></code>
			    if it cannot map JSON to Java correctly.
			    However, given the frequency with which the Facebook API changes, you might want to guard yourself from "surprise" errors in production by
			    exerting more fine-grained control over how the mapper handles mapping exceptions.  You can do so like this:
			</p>
			<div class="highlight"><pre><code class="language-java" data-lang="java">FacebookClient facebookClient = new DefaultFacebookClient("MY_ACCESS_TOKEN",
  new DefaultWebRequestor(), new DefaultJsonMapper(new JsonMappingErrorHandler() {
    public boolean handleMappingError(String unmappableJson, Class&lt;?&gt; targetType, Exception e) {
      
      // Here you might log the fact that JSON mapping failed.
      
      err.println(format("Uh oh, mapping %s to %s failed...", unmappableJson, targetType));

      // Returning true tells the mapper to map this JSON as null and keep going.
      // Returning false tells the mapper to throw an exception.
      
      return true;
    }
  }));</code></pre></div>

			<div class="bs-callout bs-callout-warning" role="alert">
			    <h4>A note about Java to JSON mapping with the Graph API</h4>

			    <div>
				This feature is only really useful for Old REST API users who <a href="legacy-rest-api.html">connect to Facebook with LegacyFacebookClient</a>.
				The Graph API currently does not require you to send any parameters as JSON, but this may change in the future.				 
			    </div>	
			</div>		

			<p>
			    As-is, <code>DefaultJsonMapper</code> should meet the needs of the vast majority of users.
			    If it doesn't support a feature you need, you can easily subclass it or write your own implementation of <code><a target="_blank" href="javadoc/com/restfb/JsonMapper.html">JsonMapper</a></code> instead.
			</p>

		    </div>

		    <div class="bs-docs-section">
			<h1 id="error-handling" class="page-header">Error Handling</h1>
			<p>					
			    All <code><a target="_blank" href="javadoc/com/restfb/FacebookClient.html">FacebookClient</a></code> methods may throw <code><a target="_blank" href="javadoc/com/restfb/exception/FacebookException.html">FacebookException</a></code>,
			    which is an unchecked exception as of RestFB 1.6.																	
			</p>

			<p>
			    These are the <code>FacebookException</code> subclasses that you may catch:
			</p>

			<ul id="exceptions-list">
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookJsonMappingException.html">FacebookJsonMappingException</a></code>
				<br/>
				<span class="footnote">					
				    Thrown when an error occurs when attempting to map Facebook API response JSON to a Java object.
				    It usually indicates that you've used the <code>@Facebook</code> annotation on a field with an unsupported type or
				    the Facebook API JSON doesn't map correctly to the fields you've annotated (e.g. attempting to map a JSON string to a Java <code>BigDecimal</code>
				    or a JSON object to a Java <code>List</code>).					
				</span>
				<div class="spacer"></div>
				<span class="footnote">
				    You generally should not explicitly catch this exception in your code, as it usually signifies programmer
				    error in setting up <code>@Facebook</code> annotations.  One valid use for catching this exception,
				    however, is to detect when Facebook changes what an API call returns on their end, which would break your live code.
				    It may be useful to catch this exception and then send a notification to you or your ops team to notify them
				    that your application needs to be updated.
				</span>
			    </li>
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookNetworkException.html">FacebookNetworkException</a></code>
				<br/>
				<span class="footnote">
				    Thrown when a failure occurs at the network level.  This can happen if your machine
				    doesn't have a network connection or the Facebook API endpoint returns an unexpected HTTP status code.
				    If there's an HTTP status code available, it's included in the exception so you may take custom actions
				    depending on what type of error occurred.
				</span>				
			    </li>
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookGraphException.html">FacebookGraphException</a></code>
				<br/>
				<span class="footnote">
				    Thrown when the Graph API returns an error, as shown in the example JSON snippet below.
				    Exposes the <code>type</code> and <code>message</code> so you can
				    handle them in your code and take custom action as needed.															
				</span>			

				<div class="highlight"><pre><code class="language-json" data-lang="json">{
  "error": {
    "type": "SomeBizarreTypeOfException",
    "message": "Everything went wrong."
  }
}</code></pre></div>					
				<span class="footnote">
				    Note that <code>FacebookGraphException</code> is a catchall Graph API exception.					
				    For your convenience, RestFB will throw more-specific
				    subclasses <code>FacebookOAuthException</code> and <code>FacebookQueryParseException</code> if it detects
				    either of these Graph API error types.  These are described below.									
				</span>						
			    </li>
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookOAuthException.html">FacebookOAuthException</a></code>
				<br/>
				<span class="footnote">
				    Thrown when the Graph API returns an OAuth-related error (type <code>OAuthException</code> or <code>OAuthAccessTokenException</code>),
				    as shown in the example JSON snippet below.													
				</span>			

				<div class="highlight"><pre><code class="language-json" data-lang="json">{
  "error": {
    "type": "OAuthException",
    "message": "Invalid access token signature."
  }
}</code></pre></div>										
			    </li>	
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookQueryParseException.html">FacebookQueryParseException</a></code>
				<br/>
				<span class="footnote">
				    Thrown when the Graph API returns an FQL query parsing error (type <code>QueryParseException</code>),
				    as shown in the example JSON snippet below.													
				</span>			

				<div class="highlight"><pre><code class="language-json" data-lang="json">{
  "error": {
    "type": "QueryParseException",
    "message": "Unknown path components: /fizzle"
  }
}</code></pre></div>									
			    </li>	
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookResponseStatusException.html">FacebookResponseStatusException</a></code>
				<br/>
				<span class="footnote">
				    This is thrown by RestFB when an FQL call fails.  <code>FacebookGraphException</code> and its subclasses are not applicable in that case because
				    Facebook returns this "legacy" exception instead due to FQL not yet being a full-fledged member of the Graph API. 

				    <code>FacebookResponseStatusException</code> will include both the error code and error message returned by the Facebook API
				    so you may take custom actions depending on the type of error that occurred.
				</span>				
			    </li>
			    <li>
				<code><a target="_blank" href="javadoc/com/restfb/exception/FacebookResponseContentException.html">FacebookResponseContentException</a></code>
				<br/>
				<span class="footnote">
				    This is thrown by RestFB when Facebook responds with unexpected data. For example, when extending an access token,
				    Facebook should return an HTTP response body of the form <code>access_token=123&expires=456</code>. But if Facebook
				    does not respond as expected - perhaps they modify the response format in some future API release - <code>FacebookResponseContentException</code> will be thrown.					
				</span>
				<div class="spacer"></div>
				<span class="footnote">
				    It is unlikely that you will ever see this exception.
				</span>				
			    </li>			
			</ul>

			<p>
			    Here's some example code to illustrate the above.  Keep in mind that your code doesn't
			    need to handle every single exception the way we're doing here - this is just to demonstrate what's possible.
			</p>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
String query = "SELECT name FROM user WHERE uid=220439 or uid=7901103";

try {
  List&lt;User&gt; users = facebookClient.executeFqlQuery(query, User.class); 
} catch (FacebookJsonMappingException e) {
  // Looks like this API method didn't really return a list of users
} catch (FacebookNetworkException e) {
  // An error occurred at the network level
  out.println("API returned HTTP status code " + e.getHttpStatusCode());
} catch (FacebookOAuthException e) {
  // Authentication failed - bad access token?  
} catch (FacebookGraphException e) {
  // The Graph API returned a specific error
  out.println("Call failed. API says: " + e.getErrorMessage());
} catch (FacebookResponseStatusException e) {
  // Old-style Facebook error response.
  // The Graph API only throws these when FQL calls fail.
  // You'll see this exception more if you use the Old REST API
  // via LegacyFacebookClient.
  if (e.getErrorCode() == 200)
    out.println("Permission denied!");
} catch (FacebookException e) {
  // This is the catchall handler for any kind of Facebook exception
}</code></pre></div>

			<div class="spacer"></div>

			<p>
			    Here's some example code to illustrate the above.  Keep in mind that your code doesn't
			    need to handle every single exception the way we're doing here - this is just to demonstrate what's possible.
			</p>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="extensibility-and-unit-testing" class="page-header">Extensibility and Unit Testing</h1>
			<p>
			    In addition to <code><a target="_blank" href="javadoc/com/restfb/DefaultFacebookClient.html">FacebookClient</a></code>, RestFB provides default implementations
			    for <code><a target="_blank" href="javadoc/com/restfb/DefaultWebRequestor.html">WebRequestor</a></code> and
			    <code><a target="_blank" href="javadoc/com/restfb/DefaultJsonMapper.html">JsonMapper</a></code>, two components that
			    <code>DefaultFacebookClient</code> depends on to do its work.						
			</p>

			<p>
			    These dependencies are designed to allow for straightforward subclassing (if you only want to replace a little bit of functionality)
			    and simple custom implementations (if you require full control).
			</p>

			<p>
			    This comes in handy when unit testing - for example, you can write your own <code>WebRequestor</code> implementation
			    that simulates a Facebook API endpoint response.  You can drop in custom data designed to exercise your application's
			    Facebook integration or simulate error conditions to make sure you're handling them properly.				
			</p>

			<p>
			    Here's a trivial example which shows one way you might implement this:
			</p>

			<div class="highlight"><pre><code class="language-java" data-lang="java">
FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN,  

  // A one-off <a target="_blank" href="javadoc/com/restfb/DefaultWebRequestor.html">DefaultWebRequestor</a> for testing that returns a hardcoded JSON
  // object instead of hitting the Facebook API endpoint URL

  new DefaultWebRequestor() {
    @Override
    public <a target="_blank" href="javadoc/com/restfb/WebRequestor.Response.html">Response</a> <a target="_blank" href="javadoc/com/restfb/WebRequestor.html#executeGet(java.lang.String)">executeGet</a>(String url) throws IOException {
      return new Response(HttpURLConnection.HTTP_OK,
        "{'id':'123456','name':'Test Person'}");
    }
  }, new DefaultJsonMapper());

// Make an API request using the mocked WebRequestor

User user = facebookClient.<a target="_blank" href="javadoc/com/restfb/FacebookClient.html#fetchObject(java.lang.String, java.lang.Class, com.restfb.Parameter...)">fetchObject</a>("ignored", User.class); 

// Make sure we got what we were expecting

assert "123456".equals(user.getId());
assert "Test Person".equals(user.getName());</code></pre></div>

		    </div>   

		    <div class="bs-docs-section">
			<h1 id="boost-performance" class="page-header">Boost Performance</h1>
			<p>
			    Generating a <code>SimpleDateFormat</code> instance is incredibly expensive 
			    and you should not generate a new formatter for every date string 
			    you have to parse. Therefore RestFB provides the possibility to 
			    replace the old and slow parsing with a faster solution. But 
			    you have to take care of some cleanup because the higher 
			    speed can result in a small memory leak. Of course RestFB 
			    provides everything you need to do it right.
			</p>

			<p>
			    With version 1.7.0 you can decide which <code><a target="_blank" href="javadoc/com/restfb/util/DateFormatStrategy.html">DateFormatStrategy</a></code> you 
			    use. The default strategy is the <code><a target="_blank" href="javadoc/com/restfb/util/SimpleDateFormatStrategy.html">SimpleDateFormatStrategy</a></code>. It's 
			    almost the same behavior as in the versions before 1.7.0 and you 
			    don't need to change anything. 
			</p>

			<p>
			    The faster stretegy is called <code><a target="_blank" href="javadoc/com/restfb/util/CachedDateFormatStrategy.html">CachedDateFormatStrategy</a></code>. You have 
			    to set this manually in the <code><a target="_blank" href="javadoc/com/restfb/util/DateUtils.html">DateUtils</a></code> singleton and call the 
			    <code>clearThreadLocal</code> method at the end of a thread to prevent the 
			    memory leak mentioned above. You should have a look at the code 
			    example below.
			</p>
			<p>
			    Because we provide the <code><a target="_blank" href="javadoc/com/restfb/util/DateFormatStrategy.html">DateFormatStrategy</a></code> as an interface you can implement your own strategy.
			</p>
			<div class="highlight"><pre><code class="language-java" data-lang="java">
DateUtils.setDateFormatStrategy(new CachedDateFormatStrategy());
// do your normal stuff in that thread
...
// clean the thread local cache just before you finish the thread
DateFormatStrategy strategy = DateUtils.getDateFormatStrategy();
if (strategy instanceof CachedDateFormatStrategy)
  ((CachedDateFormatStrategy)strategy).clearThreadLocal();
			</code></pre></div>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="links" class="page-header">Links</h1>
			<p>
			    Visit <a target="_blank" href="https://github.com/revetkn/restfb">RestFB's home on Github</a>.		
			</p>

			<p>
			    Have a question not covered here?  Ask in the <a target="_blank" href="http://groups.google.com/group/restfb">RestFB Google Group</a>.		
			</p>		

			<p>
			    Found a bug or have an enhancement request? <a target="_blank" href="https://github.com/revetkn/restfb/issues">Create a ticket in the issue tracker</a>.		
			</p>		

			<p>
			    Download a read-only copy of the current source code using Git:		
			<pre>
git clone git://github.com/revetkn/restfb.git</pre>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="restfb-users" class="page-header">RestFB Users</h1>
			<div class="user-link-container angrybirds">
			    <a target="_blank" href="https://apps.facebook.com/angrybirds/"><img src="images/angry-birds-friends.gif"/></a>
			</div>		
			<div class="user-link-container ibm">
			    <a target="_blank" href="http://www.ibm.com/cn/zh/"><img src="images/ibm.png"/></a>	
			</div>
			<div class="user-link-container hubspot">
			    <a target="_blank" href="http://hubspot.com"><img src="images/hubspot.png"/></a>	
			</div>		
			<div style="clear: both; margin-top: 12px;"></div>
			<div class="user-link-container friend2friend">
			    <a target="_blank" href="http://friend2friend.com"><img src="images/friend2friend.jpg"/></a>
			</div>		    
			<div class="user-link-container dwinq">
			    <a target="_blank" href="http://www.dwinq.com"><img src="images/dwinq.png" width="160" height="160"/></a>	
			</div>		    		    
			<div class="user-link-container tynamo">
			    <a target="_blank" href="http://tynamo.org"><img src="images/tynamo.png"/></a>	
			</div>			    

			<p class="clearer">
			    If you're a happy RestFB user and would like to add a link to your site, please <a href="mailto:maa@xmog.com">send me an email</a>.
			</p>
		    </div>

		    <div class="bs-docs-section">
			<h1 id="about" class="page-header">About</h1>
			<p>
			    RestFB was created by <a href="mailto:maa@xmog.com">Mark Allen</a>, is maintained by <a href="http://www.phpmonkeys.de/">Norbert Bartels</a>, and sponsored by <a target="_blank" href="http://xmog.com">Transmogrify, LLC</a>.  
			</p>

			<p>
			    Transmogrify is a Philadelphia-area software shop specializing in product design and web/mobile software development.
			    Our experience runs the gamut from embedded systems to Oracle DBA work to the cutting-edge web framework and iOS/Android technologies.
			    Give us a call at (215) 436-XMOG or send an email to <a href="mailto:product@xmog.com">product@xmog.com</a> if you need a hand with
			    anything software-related.  We can handle every part of the software lifecycle, from initial requirements and design to ongoing maintenance and support.			
			</p>														

			<p>
			    Development of RestFB was aided by
			</p>
			<ul>
			    <li><a target="_blank" href="http://somafm.com/">SomaFM</a></li>
			    <li><a target="_blank" href="http://en.wikipedia.org/wiki/Dead_Cities,_Red_Seas_%26_Lost_Ghosts"><i>Dead Cities, Red Seas, &amp; Lost Ghosts</i> (M83)</a></li>
			    <li><a target="_blank" href="http://en.wikipedia.org/wiki/Orbital_2"><i>Orbital 2</i> (Orbital)</a></li>
			    <li><a target="_blank" href="http://en.wikipedia.org/wiki/The_Crew_(7_Seconds_album)"><i>The Crew</i> (7 Seconds)</a></li>
			    <li><a target="_blank" href="http://en.wikipedia.org/wiki/Treatment_5"><i>Treatment 5</i> (Osker)</a></li>
			    <li><a target="_blank" href="http://en.wikipedia.org/wiki/Kid_Dynamite_(album)"><i>Kid Dynamite</i> (Kid Dynamite)</a></li>				
			</ul>			

			<p>Website icons provided by <a href="http://www.famfamfam.com/lab/icons/silk/" target="_blank">Mark James</a>.</p>

		    </div>

		    <div class="bs-docs-section">
			<h1 id="licensing" class="page-header">Licensing</h1>
			<p>
			    RestFB is open source software released under the terms of the MIT License:
			</p>

			<pre>
Copyright (c) 2010-2015 Mark Allen. 

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</pre>
		    </div>

		</div>
		<div class="col-md-3" role="complementary">
		    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
			<ul class="nav bs-docs-sidenav">
			    <li><a href="#download">Download</a></li>  		
			    <li><a href="#initialization">Initialization</a></li> 
			    <li><a href="#fetching">Fetching</a>
				<ul class="nav">
				    <li><a href="#fetching-single-objects">Single Objects</a></li>
				    <li><a href="#fetching-multiple-objects">Multiple Objects</a></li>
				    <li><a href="#fetching-connections">Connections</a></li>
				    <li><a href="#fetching-insights">Insights</a></li>
				</ul>
			    </li>

			    <li><a href="#logging">Logging</a>
				<ul class="nav">
				    <li><a href="#logging-explanation">A few words...</a></li>
				    <li><a href="#logging-example">Example</a></li>
				    <li><a href="#logging-configuration">Configuration</a></li>
				</ul>
			    </li>
			    <li><a href="#searching">Searching</a></li>  		

			    <li><a href="#executing-fql">Using FQL</a>
				<ul class="nav">
				    <li><a href="#executing-fql-queries">Executing FQL Queries</a></li>
				    <li><a href="#executing-multiple-fql-queries">Executing Multiple FQL Queries</a></li>
				</ul>
			    </li>

			    <li><a href="#advanced-usage">Advanced usage</a>
				<ul class="nav">
				    <li><a href="#metadata-introspection">Metadata &amp; Introspection</a></li>
				    <li><a href="#passing-parameters">Passing Parameters</a></li>
				    <li><a href="#selecting-specific-fields">Selecting Specific Fields</a></li>
				    <li><a href="#fetch-post-total-count">Fetch Post with comments/likes total count</a></li>
				</ul>
			    </li>

			    <li><a href="#creating-json-objects">Creating JSON Objects</a></li>			

			    <li><a href="#publishing">Publishing</a>
				<ul class="nav">
				    <li><a href="#publishing-message-event">a Message and Event</a></li>
				    <li><a href="#publishing-photo">a Photo</a></li>
				    <li><a href="#publishing-checkin">a Checkin</a></li>
				</ul>
			    </li>


			    <li><a href="#deleting">Deleting</a></li>

			    <li><a href="#batch-api">Batch API</a>
				<ul class="nav">
				    <li><a href="#batch-api-request">using Batch API</a></li>
				    <li><a href="#batch-api-photo">Batch API with Photo</a></li>
				</ul>
			    </li>

			    <li><a href="#access-token-operations">Access Token Operations</a>
				<ul class="nav">
				    <li><a href="#access-token-extend">Extending Access Token</a></li>
				    <li><a href="#access-token-application">Application Access Token</a></li>
				</ul>
			    </li>

			    <li><a href="#security-operations">Security Operations</a>
				<ul class="nav">
				    <li><a href="#security-signed-requests">Parsing Signed Requests</a></li>
				    <li><a href="#security-deauth-callback">Parsing Deauthorization Callback request</a></li>
				    <li><a href="#security-appsecret">Generating appsecret_proof</a></li>
				</ul>
			    </li>

			    <li><a href="#running-examples">Running The Examples</a></li>

			    <li><a href="#supported-graph-object-types">Supported Graph Object Types</a></li>

			    <li><a href="#json-mapping-rules">JSON Mapping Rules</a></li>

			    <li><a href="#error-handling">Error Handling</a></li>

			    <li><a href="#extensibility-and-unit-testing">Extensibility and Unit Testing</a></li>

			    <li><a href="#boost-performance">Boost Performance</a></li>

			    <li><a href="#links">Links</a></li>

			    <li><a href="#restfb-users">RestFB Users</a></li>

			    <li><a href="#about">About</a></li>

			    <li><a href="#licensing">Licensing</a></li>

			</ul>
		    </nav>
		</div>
	    </div>

	    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	    <script src="js/jquery-1.11.2.min.js"></script>
	    <!-- Include all compiled plugins (below), or include individual files as needed -->
	    <script src="js/bootstrap.min.js"></script>
	    <script src="js/restfb.min.js"></script>

	    <script type="text/javascript">
	    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	    </script>
	    <script type="text/javascript">
		try {
		    var pageTracker = _gat._getTracker("UA-12795899-1");
		    pageTracker._trackPageview();
		} catch (err) {
		}
	    </script>
	</div>
    </body>
</html>
